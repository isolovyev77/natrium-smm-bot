# 📍 ГДЕ ДОБАВЛЕНЫ ИНСТРУКЦИИ ПРО КНИГУ О СОЦСЕТЯХ

## ✅ ОТВЕТ НА ВОПРОС

### **1. В КОДЕ Python** (`src/bot.py`):

**Метод `generate_themes()`** — строки 45-49 и 62-66:
```python
🔥 ДЛЯ РАЗНООБРАЗИЯ И НОВИЗНЫ:
- ОБЯЗАТЕЛЬНО используй книгу "Большая книга о соцсетях" в FileSearch
- Применяй рекомендации из книги: вирусные форматы, хуки, триггеры
- Генерируй НЕСТАНДАРТНЫЕ темы (не только базовые упражнения/питание)
- Используй актуальные тренды 2026 года из Web Search
- Миксуй форматы: вопросы, мифы, инсайты, кейсы, челленджи
```

**Метод `generate_post()`** — строки 95-99:
```python
📚 КНИГА О СОЦСЕТЯХ:
- Используй рекомендации из книги "Большая книга о соцсетях" в FileSearch
- Применяй вирусные форматы, хуки, триггеры для вовлечения
- Используй сторителлинг и эмоциональные якоря
- Структурируй пост для максимальной читабельности в соцсетях
```

**Эти инструкции** передаются в **пользовательском запросе** (`input` параметр API).

---

### **2. В СИСТЕМНОМ ПРОМПТЕ** (`prompts/agent_system_prompt.md`):

**Только что добавлено** в раздел "ПРАВИЛА ИСПОЛЬЗОВАНИЯ ИСТОЧНИКОВ":

```markdown
✅ **Книга "Большая книга о соцсетях":**
- **ОБЯЗАТЕЛЬНО используй** для разнообразия форматов контента
- Применяй **вирусные форматы**: вопросы-хуки, мифы, кейсы, челленджи, тесты
- Используй **хуки и триггеры** для вовлечения аудитории
- Применяй **сторителлинг** и эмоциональные якоря
- Генерируй **НЕСТАНДАРТНЫЕ темы** (не только базовые "Периодизация", "Выносливость")
- **Миксуй форматы**: провокационные вопросы, разрушение мифов, личные истории, списки-топы
```

**Строки**: 45-51 в `agent_system_prompt.md`

---

## 🔄 НАДО ЛИ ПЕРЕЗАГРУЖАТЬ СИСТЕМНЫЙ ПРОМПТ?

### **ДА, ТЕПЕРЬ НАДО!** ✅

**Почему**:
- Я только что **обновил** файл `prompts/agent_system_prompt.md`
- Добавил раздел про книгу о соцсетях
- Этот файл нужно **загрузить** в Yandex Agent через веб-интерфейс

---

## 📋 КАК ОБНОВИТЬ СИСТЕМНЫЙ ПРОМПТ В АГЕНТЕ

### **Шаг 1: Скопировать содержимое**
```bash
cat /Users/isolovyev/Projects/smm_bot/NatriumSMM/prompts/agent_system_prompt.md | pbcopy
```

Или вручную:
1. Открыть файл `prompts/agent_system_prompt.md`
2. Скопировать **всё содержимое** (Cmd+A, Cmd+C)

---

### **Шаг 2: Обновить в Yandex Agent**
1. Перейти на [console.yandex.cloud](https://console.yandex.cloud)
2. Найти ваш Agent (ID: `fvtge4khsob0o092ojek`)
3. Открыть настройки системного промпта
4. **Заменить весь текст** на новый
5. Сохранить

---

## 🎯 ИТОГОВАЯ АРХИТЕКТУРА

```
┌─────────────────────────────────────────────┐
│  СИСТЕМНЫЙ ПРОМПТ (agent_system_prompt.md) │
│  Загружен в Yandex Agent                    │
│                                             │
│  ✅ Базовые правила стиля                   │
│  ✅ Специфика Натриум Фитнесс               │
│  ✅ Упоминание книги о соцсетях (НОВОЕ!)   │
└─────────────────────────────────────────────┘
            ↓
┌─────────────────────────────────────────────┐
│  ПОЛЬЗОВАТЕЛЬСКИЙ ЗАПРОС (input в API)     │
│  Формируется в коде (src/bot.py)           │
│                                             │
│  generate_themes():                         │
│  ✅ "Сгенерируй темы..."                    │
│  ✅ + инструкция про книгу                  │
│                                             │
│  generate_post():                           │
│  ✅ "Сгенерируй пост на тему X..."          │
│  ✅ + инструкция про книгу                  │
│  ✅ + инструкции техники (CoV+CoK/Few-Shot)│
└─────────────────────────────────────────────┘
            ↓
        YANDEX AGENT
            ↓
    Генерирует темы/пост
```

---

## 📊 ДВОЙНОЕ УСИЛЕНИЕ

**Почему инструкции в ДВУХ местах — это хорошо**:

### **1. Системный промпт** (базовые правила):
- ✅ Агент **всегда знает** про книгу о соцсетях
- ✅ Правила **постоянны** для всех запросов
- ✅ Высокий приоритет (часть "личности" агента)

### **2. Пользовательский запрос** (конкретные указания):
- ✅ **Усиливает** системный промпт
- ✅ Даёт **конкретные примеры** (вопросы, мифы, кейсы)
- ✅ **Напоминает** агенту про книгу в каждом запросе

**Результат**: **Максимальная вероятность**, что агент будет использовать книгу!

---

## ✅ ИТОГОВЫЙ ЧЕКЛИСТ

**Что сделано**:
- ✅ Инструкции добавлены в `src/bot.py` (методы `generate_themes` и `generate_post`)
- ✅ Инструкции добавлены в `prompts/agent_system_prompt.md` (раздел "ИСТОЧНИКИ")

**Что нужно сделать**:
- ☐ **Обновить системный промпт в Yandex Agent** (скопировать содержимое `agent_system_prompt.md`)

**После обновления**:
- ✅ Инструкции будут **в двух местах** (двойное усиление)
- ✅ Агент будет генерировать **разнообразные темы** с вирусными форматами
- ✅ Посты будут **вовлекающими** (хуки, триггеры, сторителлинг)

---

## 🚀 БЫСТРАЯ КОМАНДА ДЛЯ КОПИРОВАНИЯ

**macOS**:
```bash
cat /Users/isolovyev/Projects/smm_bot/NatriumSMM/prompts/agent_system_prompt.md | pbcopy
```

**После выполнения** → промпт уже в буфере обмена → вставить в Yandex Agent → сохранить!

---

**Дата**: 25 января 2026  
**Статус**: ✅ Инструкции добавлены в ДВА места (код + системный промпт)  
**Действие**: Обновить системный промпт в Yandex Agent

# ‚úÖ –î–û–ë–ê–í–õ–ï–ù–ê –°–¢–ê–¢–ò–°–¢–ò–ö–ê –¢–û–ö–ï–ù–û–í

**–î–∞—Ç–∞**: 25 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**

---

## üéØ –ß–¢–û –î–û–ë–ê–í–õ–ï–ù–û

–¢–µ–ø–µ—Ä—å –ø—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–≤–æ–¥–∏—Ç **–¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤** –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏:
- üìä –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–º
- üìä –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–æ–≤

---

## üìä –§–û–†–ú–ê–¢ –í–´–í–û–î–ê

```
----------------------------------------------------------------------
üìä –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–º
Tokens in/out/total: 1523+487=2010
----------------------------------------------------------------------
```

**–ì–¥–µ**:
- `in` (input_tokens) ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤–æ **–≤—Ö–æ–¥—è—â–µ–º –∑–∞–ø—Ä–æ—Å–µ**
- `out` (completion_tokens) ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤ **—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –æ—Ç–≤–µ—Ç–µ**
- `total` ‚Äî **–æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ** —Ç–æ–∫–µ–Ω–æ–≤ (—Å—É–º–º–∞)

---

## üîß –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢

### **1. API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç usage –¥–∞–Ω–Ω—ã–µ**

–ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –∫ Yandex Foundation Models API –æ—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–±—ä–µ–∫—Ç `usage`:

```python
response = self.client.responses.create(...)

# response.usage —Å–æ–¥–µ—Ä–∂–∏—Ç:
# - inputTextTokens (–∏–ª–∏ input_text_tokens)
# - completionTokens (–∏–ª–∏ completion_tokens)
# - totalTokens (–∏–ª–∏ total_tokens)
```

### **2. –ú–µ—Ç–æ–¥ `_call_api` –∏–∑–≤–ª–µ–∫–∞–µ—Ç usage**

```python
def _call_api(self, variables, input_text) -> tuple:
    response = self.client.responses.create(...)
    
    result = response.output_text
    
    # –ò–∑–≤–ª–µ–∫–∞–µ–º usage –¥–∞–Ω–Ω—ã–µ
    usage = {
        'input_tokens': response.usage.inputTextTokens,
        'completion_tokens': response.usage.completionTokens,
        'total_tokens': response.usage.totalTokens
    }
    
    return result, usage  # ‚Üê –≤–æ–∑–≤—Ä–∞—â–∞–µ–º tuple
```

### **3. –ú–µ—Ç–æ–¥—ã `generate_themes` –∏ `generate_post` –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç tuple**

**–ë—ã–ª–æ**:
```python
def generate_themes(...) -> str:
    return self._call_api(...)

def generate_post(...) -> str:
    return self._call_api(...)
```

**–°—Ç–∞–ª–æ**:
```python
def generate_themes(...) -> tuple:
    return self._call_api(...)  # –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç (text, usage)

def generate_post(...) -> tuple:
    return self._call_api(...)  # –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç (text, usage)
```

### **4. –í `main.py` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º tuple**

**–ë—ã–ª–æ**:
```python
themes = bot.generate_themes(technique)
post = bot.generate_post(theme, technique, post_length)
```

**–°—Ç–∞–ª–æ**:
```python
themes, usage = bot.generate_themes(technique)
print_token_usage("–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–º", usage)

post, usage = bot.generate_post(theme, technique, post_length)
print_token_usage("–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–∞", usage)
```

### **5. –§—É–Ω–∫—Ü–∏—è `print_token_usage` –≤—ã–≤–æ–¥–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É**

```python
def print_token_usage(operation: str, usage: dict):
    input_tokens = usage.get('input_tokens', 0)
    completion_tokens = usage.get('completion_tokens', 0)
    total_tokens = usage.get('total_tokens', 0)
    
    print("\n" + "-"*70)
    print(f"üìä {operation}")
    print(f"Tokens in/out/total: {input_tokens}+{completion_tokens}={total_tokens}")
    print("-"*70 + "\n")
```

---

## üìä –ü–†–ò–ú–ï–† –í–´–í–û–î–ê

### **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–º**:

```
üîÑ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–º —Å —Ç–µ—Ö–Ω–∏–∫–æ–π cov+cok...

======================================================================

üìã –°–ì–ï–ù–ï–†–ò–†–û–í–ê–ù–ù–´–ï –¢–ï–ú–´:

1Ô∏è‚É£ –ü–æ—á–µ–º—É —Ä–∞–∑–º–∏–Ω–∫–∞ –≤–∞–∂–Ω–∞? [CrossFit L1]
2Ô∏è‚É£ –ú–∏—Ñ—ã –æ –∫–∞—Ä–¥–∏–æ [PubMed 2026]
...
üîü –°–æ–Ω –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ [–í–û–ó]

======================================================================

----------------------------------------------------------------------
üìä –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–º
Tokens in/out/total: 1523+487=2010
----------------------------------------------------------------------
```

### **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–∞**:

```
‚úçÔ∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–∞ –Ω–∞ —Ç–µ–º—É: '–ú–∏—Ñ—ã –æ –∫–∞—Ä–¥–∏–æ'
üìä –¢–µ—Ö–Ω–∏–∫–∞: cov+cok, –î–ª–∏–Ω–∞: 600 —Å–∏–º–≤–æ–ª–æ–≤

======================================================================

üìÑ –°–ì–ï–ù–ï–†–ò–†–û–í–ê–ù–ù–´–ô –ü–û–°–¢:

üí™ –ú–ò–§–´ –û –ö–ê–†–î–ò–û: –†–ê–ó–†–£–®–ê–ï–ú –°–¢–ï–†–ï–û–¢–ò–ü–´
...

======================================================================

üíæ –ü–æ—Å—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω: output/posts/post_cov+cok_–ú–∏—Ñ—ã_–æ_–∫–∞—Ä–¥–∏–æ_20260125_213045.md

----------------------------------------------------------------------
üìä –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–∞
Tokens in/out/total: 2341+612=2953
----------------------------------------------------------------------
```

---

## üí∞ –†–ê–°–ß–Å–¢ –°–¢–û–ò–ú–û–°–¢–ò

### **–¢–∞—Ä–∏—Ñ—ã Yandex Foundation Models** (–Ω–∞ —è–Ω–≤–∞—Ä—å 2026):

**YandexGPT Pro** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –º–æ–¥–µ–ª—å):
- –í—Ö–æ–¥—è—â–∏–µ —Ç–æ–∫–µ–Ω—ã: ~‚ÇΩ0.0004 –∑–∞ 1 —Ç–æ–∫–µ–Ω
- –ò—Å—Ö–æ–¥—è—â–∏–µ —Ç–æ–∫–µ–Ω—ã: ~‚ÇΩ0.0012 –∑–∞ 1 —Ç–æ–∫–µ–Ω

### **–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞**:

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–º** (1523 in + 487 out = 2010 total):
```
–°—Ç–æ–∏–º–æ—Å—Ç—å = (1523 √ó ‚ÇΩ0.0004) + (487 √ó ‚ÇΩ0.0012)
         = ‚ÇΩ0.61 + ‚ÇΩ0.58
         = ‚ÇΩ1.19
```

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–∞** (2341 in + 612 out = 2953 total):
```
–°—Ç–æ–∏–º–æ—Å—Ç—å = (2341 √ó ‚ÇΩ0.0004) + (612 √ó ‚ÇΩ0.0012)
         = ‚ÇΩ0.94 + ‚ÇΩ0.73
         = ‚ÇΩ1.67
```

**–ò—Ç–æ–≥–æ –∑–∞ —Å–µ—Å—Å–∏—é** (1 —Ç–µ–º–∞ + 1 –ø–æ—Å—Ç):
```
‚ÇΩ1.19 + ‚ÇΩ1.67 = ‚ÇΩ2.86
```

---

## üìà –ê–ù–ê–õ–ò–ó –†–ê–°–•–û–î–ê –¢–û–ö–ï–ù–û–í

### **–§–∞–∫—Ç–æ—Ä—ã, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ —Ä–∞—Å—Ö–æ–¥**:

#### **–í—Ö–æ–¥—è—â–∏–µ —Ç–æ–∫–µ–Ω—ã (input)**:
- –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –∞–≥–µ–Ω—Ç–∞ (–∑–∞–≥—Ä—É–∂–µ–Ω –≤ Yandex Agent)
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Ç–µ—Ö–Ω–∏–∫–∏ (`zero_shot` < `few_shot` < `cov+cok`)
- –î–ª–∏–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø—Ä–æ –∫–Ω–∏–≥—É –æ —Å–æ—Ü—Å–µ—Ç—è—Ö

#### **–ò—Å—Ö–æ–¥—è—â–∏–µ —Ç–æ–∫–µ–Ω—ã (completion)**:
- –î–ª–∏–Ω–∞ –ø–æ—Å—Ç–∞ (`POST_LENGTH`)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ–º (10 —Ç–µ–º)
- –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ (CoV+CoK –¥–æ–±–∞–≤–ª—è–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏)

### **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏–∫**:

**zero_shot** (—Å–∞–º–∞—è –¥–µ—à—ë–≤–∞—è):
- –ú–∏–Ω–∏–º—É–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
- –ë—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- ~1500-2000 –≤—Ö–æ–¥—è—â–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤

**cov+cok** (—Å—Ä–µ–¥–Ω—è—è):
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø—Ä–æ –ø—Ä–æ–≤–µ—Ä–∫—É —Ñ–∞–∫—Ç–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- ~2000-2500 –≤—Ö–æ–¥—è—â–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤

**few_shot** (—Å–∞–º–∞—è –¥–æ—Ä–æ–≥–∞—è):
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø—Ä–æ –ø—Ä–∏–º–µ—Ä—ã
- –ò–∑—É—á–µ–Ω–∏–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
- ~2500-3000 –≤—Ö–æ–¥—è—â–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤

---

## üéØ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –î–õ–Ø –û–¢–ß–Å–¢–ê

### **–î–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ç–µ—Ö–Ω–∏–∫ –ø—Ä–æ–º–ø—Ç–∏–Ω–≥–∞**:

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É —Å **zero_shot**
2. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å 10 —Ç–µ–º ‚Üí –∑–∞–ø–∏—Å–∞—Ç—å —Ç–æ–∫–µ–Ω—ã
3. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å 3 –ø–æ—Å—Ç–∞ ‚Üí –∑–∞–ø–∏—Å–∞—Ç—å —Ç–æ–∫–µ–Ω—ã –ø–æ –∫–∞–∂–¥–æ–º—É
4. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è **cov+cok**
5. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è **few_shot**

### **–¢–∞–±–ª–∏—Ü–∞ –¥–ª—è –æ—Ç—á—ë—Ç–∞**:

| –¢–µ—Ö–Ω–∏–∫–∞   | –û–ø–µ—Ä–∞—Ü–∏—è       | In     | Out   | Total  | –°—Ç–æ–∏–º–æ—Å—Ç—å |
|-----------|----------------|--------|-------|--------|-----------|
| zero_shot | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–º  | 1234   | 345   | 1579   | ‚ÇΩ0.90     |
| zero_shot | –ü–æ—Å—Ç #1        | 1890   | 456   | 2346   | ‚ÇΩ1.31     |
| zero_shot | –ü–æ—Å—Ç #2        | 1905   | 478   | 2383   | ‚ÇΩ1.34     |
| zero_shot | –ü–æ—Å—Ç #3        | 1897   | 461   | 2358   | ‚ÇΩ1.31     |
| **–ò—Ç–æ–≥–æ** |                | **6926** | **1740** | **8666** | **‚ÇΩ4.86** |
|           |                |        |       |        |           |
| cov+cok   | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–º  | 1523   | 487   | 2010   | ‚ÇΩ1.19     |
| cov+cok   | –ü–æ—Å—Ç #1        | 2341   | 612   | 2953   | ‚ÇΩ1.67     |
| ...       | ...            | ...    | ...   | ...    | ...       |

---

## üìù –û–ë–ù–û–í–õ–Å–ù–ù–´–ï –§–ê–ô–õ–´

### **1. `src/bot.py`**:

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- `_call_api()` —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `tuple: (result, usage)`
- `generate_themes()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `tuple: (themes, usage)`
- `generate_post()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `tuple: (post, usage)`

### **2. `src/main.py`**:

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `print_token_usage(operation, usage)`
- –û–±–Ω–æ–≤–ª—ë–Ω –≤—ã–∑–æ–≤ `generate_themes()` ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞ tuple
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –æ–±–∞ –≤—ã–∑–æ–≤–∞ `generate_post()` ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞ tuple
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤

---

## ‚úÖ –ò–¢–û–ì

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ì–æ—Ç–æ–≤–æ!**

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ**:
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ `usage` –¥–∞–Ω–Ω—ã—Ö –∏–∑ API –æ—Ç–≤–µ—Ç–∞
- ‚úÖ –í—ã–≤–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–º
- ‚úÖ –í—ã–≤–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ—Å—Ç–æ–≤
- ‚úÖ –ö—Ä–∞—Å–∏–≤–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: `Tokens in/out/total: X+Y=Z`

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ –í–∏–¥–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –ú–æ–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ —Ç–µ—Ö–Ω–∏–∫–∞–º
- ‚úÖ –ú–æ–∂–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –£–¥–æ–±–Ω–æ –¥–ª—è –æ—Ç—á—ë—Ç–∞ –ø–æ –¥–æ–º–∞—à–Ω–µ–º—É –∑–∞–¥–∞–Ω–∏—é

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
```bash
cd /Users/isolovyev/Projects/smm_bot/NatriumSMM
source .venv/bin/activate
python src/main.py
```

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
----------------------------------------------------------------------
üìä –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–º
Tokens in/out/total: 1523+487=2010
----------------------------------------------------------------------
```

---

**–î–∞—Ç–∞**: 25 —è–Ω–≤–∞—Ä—è 2026  
**–ê–≤—Ç–æ—Ä**: GitHub Copilot  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω–∞!
